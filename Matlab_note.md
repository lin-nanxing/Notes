# Matlab复习笔记(个人向)  
___
*学Matlab无非就一个讲究，老老实实把系统的`help`~~帮助中心~~部分给看了，非常的管用*
---
# 1. 变量   
- 申明  
  ```matlab
  变量=表达式;
  ```
  - 写了`;`则不会显示在命令行窗口中，不写则会显示
- 查询  
  - `who`语句查看工作空间中的所有变量
  - `whos`查看工作空间中变量的详细信息  
- 预置变量名    
  - `pi`:圆周率数Π
  - `inf,Inf`:无穷大
  - `nan,NaN`:一个不定值，代表置空
  - `ans`:数值若无指定变量接着，系统会把值赋给特殊变量`ans`.
> **应避免给系统预定义的变量重新赋值，可以用`iskeyword`命令查看**

- 可以取连续的范围赋值,其格式为
  `变量名=范围边界1:步长:范围边界2`

  其中步长可以省略，**默认为1**
  ![例子](/jpg/屏幕截图%202024-01-26%20134945.png)
- 变量的存储  
  `save 文件名 变量名列表`
  或者  
  `save(文件名，变量名1，变量名2，……)`

- 从文件中提取变量 
  `load 文件名 变量名`  
    
- 清除当前工作空间中的变量  
  `clear 文件名 变量名`%清除指定的变量   

  `clear all`%清除所有的变量

  `clc`在命令行中输出，清屏
- **Matlab中的文件格式是`.mat`,脚本(代码)格式是`.m`**

# 2.运算
- `+,-,*`:加减乘
- `/`:左除(左边除右边)
  `\`:右除(右边除左边)
- `^`:幂运算
- **矩阵四则运算**      
  - `.*`:点乘，即矩阵各元素相乘
  - `./`:点除，即矩阵各元素相除
  - `.^`:点幂，即矩阵各元素相幂
  ```Matlab
    x=[1,2,3];
    y=[4,5,6];
    x.*y=[1*4,2*5,3*6];
    y./x=[4/1,5/2,6/3];
    x.\^y=[1\^4,2\^5,3\^6]; 
  ```  
- **Matlab以双精度double执行所有运算，运算结果可以在屏幕上输出并赋给变量**
- **Matlab对矩阵的计算操作都是以`列`为单位的**
-  数的输出格式可以通过format命令指定，它只会改变变量的输出格式，但不会影响变量的值。
-  在输入命令行直接运算时，可以按`tab`补全信息，按`Esc`删除正在编辑的这行命令行

# 3.矩阵
- **在Matlab中，矩阵的运算速度非常快，可以短时间内处理大量的数据。**
- 用`[]`框住矩阵元素，一行输入为标准，`;`来分隔每一行的信息，同行的元素可以用空格或者逗号`,`分隔
  如以下例子
```Matlab
mat1=[1,2,3;5,6,7;9,6,1]
``` 
![结果是](/jpg/屏幕截图%202024-01-26%20132145.png)
- 矩阵赋值有两种形式，除了直接赋值还有对单个元素修改的赋值方法，**也可以把小矩阵当成其元素进行赋值**
```
A=[1,2;5,6];  %直接赋值
A(1,1)=0;   %对单个元素的修改
A=[A;7,8];   %把矩阵当成元素进行赋值
```
- 对矩阵内元素的使用是一种“引用”的方式，即`利用下标调用矩阵元素`。
- 可以用`:`在矩阵引用中表示整个被引用(创建向量)，前后有数字表示引用的范围
```Matlab
mat1=[1,2,3;5,6,7;9,6,1]
mat1(1,3)   %调用单个元素
mat1(:,2)   %调用某一列元素
mat1(1,:)   %调用某一行元素
mat1(:,:)   %全部调用
```
![例子](/jpg/屏幕截图%202024-01-26%20134146.png)
![特例](/jpg/20200807202040416.png)
- 行数相同的矩阵可以使用`[A1,A2,…]`或者`[A1 A2 …]`的格式串联合并
- 对于比较大且复杂的矩阵，可以选择先数据导入后创建一个特殊的`.m`文件的方法存储。需要用的时候再`load`导入变量即可

# 4.矩阵常用函数  
1. 创建矩阵
   1. `zeros`:创建一个全零矩阵
   2. `ones`:创建一个全一矩阵
   3. `eye`:创建一个单位矩阵
   4. `rand`:创建一个随机矩阵
   5. `diag`：创建一个对角矩阵
---
   > 后面接的格式为：出现一个变量则生成方阵，出现两个变量则生成对应长宽的矩阵
2. 访问元素
   1. `numel`:返回矩阵中的元素的个数
   2. `size`:返回矩阵的大小
   3. `length`:返回矩阵的大小
![例子](/jpg/屏幕截图%202024-01-26%20233713.png)
3. 基础运算
   1. 对数  
   `log()`表示对数，默认以`e`为底，要说明其他底数的对数，则可在`log`后加数字,如`log2`
   2. 指数    
   用`a^b`的格式表示即可；**若要表示自然对数`e`，用`exp(1)`即可**；以`e`为底的指数函数用`exp(n)`
   3. 三角函数
   `sin()`，`cos()`和`tan()`都是支持的
   4. 转置  
      `transpose()`或者后边加`'`可以实现
   5. `reshape`:改变矩阵的形状，变成其他长宽的矩阵
   6. `repmat`:复制并拼接矩阵
      > 例如A为2X2，repmat(A,2)则是拼成[A,A;A,A]的造型
   7. `kron`:计算克罗内克积*
   8. `dot`:计算点积(内积)
   9.  `cross`:计算叉积(外积)
   10. `det`:计算矩阵的行列式
   11. `inv`:计算矩阵的逆
   12. `eig`:计算矩阵的特征值和特征向量
   13. `svd`:计算矩阵的奇异值分解*
   14. `sum`:计算矩阵元素的积
   15. `prod`:计算矩阵元素的乘积
   16. `max`:返回矩阵中的最大值
   17. `min`:返回矩阵中的最小值
   18. `sort()`:对每一列按从小到大的顺序排列，若只有一行，则对行从小到大排
   19. `sortrows()`:以行为单位，按照第一列的数从小到大排列
   20. `[m,M]=bounds(数组名)`:计算数组中的最小最大值
   21. `mean`:计算数组元素的平均值
   22. `median`:计算数组元素的中位数
   23. `std`:计算数组元素的标准差
   24. `var`:计算数组元素的方差
   25. `x=A\b`:计算**Ax=b**的解
   26. `[A,B]=equationToMatrix([eqn1,eqn2,……],[x,y,……]); `和
    ` X=linsolve(A,B)`    %求解线性方程组
    27. `y=y(x);subs(y,x,val)`    %可以来求出`y=y(x)`函数在`x=val`时的y值
4. 图像可视化
   1. 二维平面图象与坐标系  
   使用线性坐标曲线命令`plot`,可以生成线段、曲线和参数方程的函数图像，其格式为    
   `plot(X,Y)`或者`plot(x1,y1,x2,y2,…)`,其中前者代表创建一个关于(X,Y)的函数图像，后者代表创建多个关于(xi,yi)的函数图像，其中xi和yi是一对相应的点集，yi也可以是关于xi的函数，    
  `plot`还支持在点击说明后添加`LineSpec`信息，使用指定的线型、标记和颜色创建绘图，且可以同时对多条曲线设置。    
  `plot(Y)`代表一种隐式X坐标的图，如果Y是向量，则X坐标范围从1到`length(Y)`; 如果Y是矩阵，则对于Y中的每一列，图中包含一个对应的行。X的范围是从1到Y的行数; 如果Y包含复数，Matlab会绘制出Y的虚部对应实部的图(复平面),如果同时指定了X和Y，虚部则会被忽略。
   `plot(tb,xvar,yvar)`表示要绘制tb中的变量xvar和yvar。  
  没有变量就要指定一个变量; 要绘制多个数据集，要为xvar和与yvar指定多个变量; 若两个参数都包含多个变量，它们包含的变量数目必须相同。
  如以下例子:
![1](/jpg/屏幕截图%202024-01-27%20222146.png)
![2](/jpg/屏幕截图%202024-01-27%20222208.png)

  1. 三维图像与坐标系
      1. `linespace(边界1，步长，边界2)`  
        设置线性坐标的变量值集合    
      2. `title()`
        设置图像的标题
      3. `xlabel()`或`ylabel()`、`zlabel()` 
        设置坐标系基向量的名称
      4. `[X,Y]=meshgrid(…,…)`  
        为三维绘图的图像构建在`XOY`平面的取值点集合(或者说图像在`XOY`平面的投影点集)
      5. `surf(X,Y,Z)` 
        形成三维图像
      6. `disp()`
        等同于`print()`函数，展示任意变量或值

# 5.数据导出导入
- 可以用`load(文件名)`来包含外部数据文件并将其变成矩阵赋值保存，常见的数据格式有excel和txt
- 可以用`save(文件名, 变量名)`将变量从工作区保存到文件中，文件格式是`.mat`(特别用来存数组); 如果文件已经存在,`save`会覆盖该文件。若在变量名后加`"-append"`的说明，便可以使变量多加进文件中，当然若有重复仍覆盖。    
    当然也可以写作`save 文件名`直接保存，但没说明具体变量，则会把工作区的全部变量都保存了。要指定变量则为`save 文件名 变量名1 变量名2 ……`
- 从工作区删除变量则用`clear`命令 
- 如果要保留部分精度，则不能使数据在保存时被压缩，这需要使用`-nocompression`作为括号内的最后词条表示
___
- **从Excel中读取表格**
  以前是用`xlsread()`和`xlswrite()`，不过从R2019a后更新了新的函数，兼容更多的格式，强烈推荐使用：
  ```Matlab
  1.
  变量名=readmatrix(文件名,'Sheet',选用的sheet名,'Range',读取范围/方形范围)    %固定格式，将指定的范围读成矩阵输入
  *readmatrix()只读数据，遇到其他数据类别直接跳过
  *也可以直接readmatrix(文件名)读取全部数据
  2. 
  变量名=readcell(文件名,'Sheet',选用的sheet名,'Range',读取范围/方形范围)    %固定格式，将指定的范围读成元胞输入
  *其他用法基本与readmatrix()一致
  ```
- **将数据写出为相应格式**
  

# 6.数据清理和处理    
- 可以使用`unique()`函数去除重复数据项
- 可以使用`isnan()`函数找出数据中的缺失项，并用`NaN`来代替它，让数据表示完整。
- 可以使用    
  `str2num()`
  %将字符数组或者字符串转化成数值数组
  `cell2mat()`
  %将元胞数组转换成基础数据类型的普通数组
  或者说打碎结构体、数组的界限，将数据全部统一排成一个数组内的元素情况。
- 可以使用`数组名(比较条件)`的方法实施数据的简单筛选
- **详细内容可以查看网址[Matlab数据预处理](https://ww2.mathworks.cn/discovery/data-preprocessing.html)内的文章**

# 7.数据流的输出输入
- `input(输入说明文字)`   
  %请求并接收一个数值输入，若在说明文字后加上"s"，则表示接受的内容不作为数字输入而作为字符串输入    
  > 例如`txt=input("Do you want more?","s")`表示接收一个 问题的文本回答
- `disp(变量名)`    
  显示变量的值，不会主动显示变量名称。若变量中包含空数组，则会返回disp，但不显示任何内容
  \*如果要在命令行窗口的同一行中显示多个变量值，可以使用字符串构造函数或者外加`[]`变成一个数组。   
  > 1. 用`[]`将多个字符向量串联起来，对数字使用`num2str`函数将数值转换为字符，从而一起用`disp`输出
  > 2. 用`sprintf`创建文本,然后使用`disp`展示出来，其中字符变量的配位符是`%s`，数值变量的配位符是`%d`十进制/`%o`八进制/`%x`十六进制/`f`双精度小数/`e`指数
  > 3. 用`fprintf`直接显示文本，这同样要显示配位符，但更重要的是**必须在文本末尾添加换行`\n`字符**
  ```Matlab
  例如：
  name = 'Alice';   
  age = 12;
  法一 X = [name,' will be ',num2str(age),' this year.'];
  disp(X)
  法二 X = sprintf('%s will be %d this year.',name,age);
  disp(X)
  法三 fprintf('%s will be %d this year.\n',name,age);
  ```
- 可以使用`[s1,s2]`或者`[s1 s2]`的格式将字符串串联连接; 或者使用`[s1;s2]`将字符串并联连接为两行矩阵
 
# 7.结构体
Matlab中支持的数据类型有`logical/boolen`、`char`(字符串或者是字符)、`cell`(元胞)、`struct`(结构体)、`numeric`(int8-int64、uint8-uint64、**single(float)**、double)。
1. **numeric**
   可以使用`数据类型(变量名)`的方法强制执行类型转化
2. **struct**
   用
   ```Matlab
   变量名=struct(属性1，{属性1的值}，属性2，{属性2的值}，……)
   ```
   的形式表示，其中值可以在创建前赋也可以在创建后赋，属性建议用`''`包含词，`""`包含句，像一个**键值对组**
   ```C++
   上述语句类似于C++的

   struct xxx{
    ElemType 属性1=xxx;
    ElemType 属性2；
    ……
   };变量名
   ```
3. **cell**
   与矩阵类似，但存储异构数据，每个条目包含不同`ElemTpye`的数据,声明使用`{}`包含即可，依旧是`,`分列，`;`分行。
   ```Matlab
   例如以下的例子：
   c={ , , ;, , };    %创建一个空元胞
   B={1,2,3;'text',datatime('today),hours(1)};    %创建一个2X3的元胞
   B={{1,2,3};'text',datatime('today),hours(1)};    %创建一个2X2的元胞
   ```
   - 使用`()`可以索引元胞对应位置的元素名称或者说元素类型;**使用`{}`则可以得到具体的矩阵或者`string`**
   - 以下为一些和元胞相关的函数方法:    
    1. `cell2struct()`: 将cell数组中包含的信息转变为一个结构体
    2. `num2cell()`: 将数组转化为相同大小的cell
    3. `mat2cell(数组名,指定的划分方式)`: 指定行、列划分数组为cell，例如
   ```Matlab
   A是一个4X6的矩阵
   C=mat2cell(A,[2,2],[2,4])
   %表示把A按行分为2行和2行，按列分为2列和4列，互相交叉配对，变成两个2X2和两个2X4共四个数组元素组成元胞C
   *若划分只有一组，则默认是关于行的分割
   ```
    4. 可以用`celldisp()`函数来一个一个展示元胞中的元素具体信息
   > 元胞常配合`reshape(生成向量,长宽规格)`的矩阵生成函数使用
   5. 亦可以使用`cat()`函数进行数组的串联   
   ![举例](/jpg/屏幕截图%202024-01-31%20232551.png)
